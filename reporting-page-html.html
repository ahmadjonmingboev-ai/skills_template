<!-- Reporting Page HTML -->
<div id="reportingPage" class="reporting-container">
    <!-- Header Section -->
    <div class="page-header">
        <div class="header-left">
            <h1 class="page-title">
                <svg class="title-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                </svg>
                Reporting & Analytics
            </h1>
            <span class="page-subtitle">Organization-wide skill insights and performance metrics</span>
        </div>
        <div class="header-right">
            <select id="reportingPeriod" class="period-select" onchange="updateReportingPeriod()">
                <option value="all">All Time</option>
                <option value="current">Current Status</option>
            </select>
            <button id="refreshReportBtn" class="refresh-btn" onclick="refreshReportData()">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                Refresh
            </button>
            <button class="export-btn" onclick="exportFullReport()">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                Export Report
            </button>
        </div>
    </div>

    <!-- Key Metrics Cards -->
    <div class="metrics-grid">
        <div class="metric-card">
            <div class="metric-icon" style="background: var(--primary-light);">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                </svg>
            </div>
            <div class="metric-content">
                <span class="metric-label">Total Users</span>
                <span class="metric-value" id="totalUsersMetric">0</span>
                <span class="metric-change positive">Active in system</span>
            </div>
        </div>
        
        <div class="metric-card">
            <div class="metric-icon" style="background: var(--success-light);">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            <div class="metric-content">
                <span class="metric-label">Overall Completion</span>
                <span class="metric-value" id="overallCompletion">0%</span>
                <span class="metric-change" id="completionTrend">Across all skills</span>
            </div>
        </div>
        
        <div class="metric-card">
            <div class="metric-icon" style="background: var(--info-light);">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                </svg>
            </div>
            <div class="metric-content">
                <span class="metric-label">Total Tasks</span>
                <span class="metric-value" id="totalTasksMetric">0</span>
                <span class="metric-change">Available skills</span>
            </div>
        </div>
        
        <div class="metric-card">
            <div class="metric-icon" style="background: var(--warning-light);">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
            </div>
            <div class="metric-content">
                <span class="metric-label">Active Markets</span>
                <span class="metric-value" id="activeMarkets">0</span>
                <span class="metric-change">Regions covered</span>
            </div>
        </div>
    </div>

    <!-- Charts Row 1 -->
    <div class="charts-row">
        <!-- Team Performance Chart -->
        <div class="chart-container">
            <div class="chart-header">
                <h3>Team Performance</h3>
                <button class="chart-action-btn" onclick="exportTeamData()">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                    </svg>
                </button>
            </div>
            <div class="chart-body">
                <canvas id="teamPerformanceChart"></canvas>
            </div>
        </div>

        <!-- Category Progress Chart -->
        <div class="chart-container">
            <div class="chart-header">
                <h3>Category Progress</h3>
                <button class="chart-action-btn" onclick="exportCategoryData()">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                    </svg>
                </button>
            </div>
            <div class="chart-body">
                <canvas id="categoryProgressChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Market Readiness Section -->
    <div class="market-readiness-section">
        <div class="section-header">
            <h3>Market Readiness Analysis</h3>
            <div class="section-actions">
                <select id="marketFilter" class="filter-select" onchange="filterMarketData()">
                    <option value="all">All Markets</option>
                </select>
                <button class="action-btn" onclick="exportMarketData()">Export</button>
            </div>
        </div>
        <div class="market-cards-grid" id="marketCardsGrid">
            <!-- Dynamic market cards -->
        </div>
    </div>

    <!-- Tables Row -->
    <div class="tables-row">
        <!-- Top Performers Table -->
        <div class="table-section">
            <div class="section-header">
                <h3>Top Performers</h3>
                <span class="badge success">Top 10</span>
            </div>
            <div class="table-wrapper">
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Name</th>
                            <th>Team</th>
                            <th>Completion</th>
                            <th>Skills</th>
                        </tr>
                    </thead>
                    <tbody id="topPerformersBody">
                        <!-- Dynamic content -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Skill Gaps Table -->
        <div class="table-section">
            <div class="section-header">
                <h3>Critical Skill Gaps</h3>
                <span class="badge danger">Attention Required</span>
            </div>
            <div class="table-wrapper">
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>Skill</th>
                            <th>Category</th>
                            <th>Coverage</th>
                            <th>Gap</th>
                            <th>Priority</th>
                        </tr>
                    </thead>
                    <tbody id="skillGapsBody">
                        <!-- Dynamic content -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Team Comparison Section -->
    <div class="team-comparison-section">
        <div class="section-header">
            <h3>Team Comparison Matrix</h3>
            <div class="section-actions">
                <button class="action-btn" onclick="toggleTeamView()">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/>
                    </svg>
                    Toggle View
                </button>
            </div>
        </div>
        <div class="comparison-table-wrapper">
            <table class="comparison-table" id="teamComparisonTable">
                <thead>
                    <tr>
                        <th>Team</th>
                        <th>Members</th>
                        <th>Avg. Completion</th>
                        <th>Strongest Category</th>
                        <th>Weakest Category</th>
                        <th>Trend</th>
                    </tr>
                </thead>
                <tbody id="teamComparisonBody">
                    <!-- Dynamic content -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Export Options Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Export Report Options</h3>
                <button class="modal-close" onclick="closeExportModal()">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <label class="export-option">
                        <input type="checkbox" id="exportSummary" checked>
                        <span>Executive Summary</span>
                    </label>
                    <label class="export-option">
                        <input type="checkbox" id="exportTeams" checked>
                        <span>Team Performance</span>
                    </label>
                    <label class="export-option">
                        <input type="checkbox" id="exportCategories" checked>
                        <span>Category Analysis</span>
                    </label>
                    <label class="export-option">
                        <input type="checkbox" id="exportMarkets" checked>
                        <span>Market Readiness</span>
                    </label>
                    <label class="export-option">
                        <input type="checkbox" id="exportGaps" checked>
                        <span>Skill Gaps</span>
                    </label>
                    <label class="export-option">
                        <input type="checkbox" id="exportPerformers" checked>
                        <span>Top Performers</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeExportModal()">Cancel</button>
                <button class="btn-primary" onclick="executeExport()">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    Download Report
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="reportingLoadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p id="reportingLoadingMessage">Generating reports...</p>
    </div>

    <!-- Toast Container -->
    <div id="reportingToastContainer" class="toast-container"></div>

    <!-- No Access Message -->
    <div id="reportingNoAccessMessage" class="no-access" style="display: none;">
        <div class="no-access-content">
            <svg class="no-access-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
            <h2>Access Restricted</h2>
            <p>You need appropriate privileges to access reporting.</p>
            <button class="btn-primary" onclick="window.location.href='/'">Go Back</button>
        </div>
    </div>
</div>